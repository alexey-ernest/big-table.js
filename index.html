<!DOCTYPE html>
<html>
  <head>
    <title>BigTable.js Demo</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/style.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/big-list.js"></script>
    <script src="/big-table.js"></script>
  </head>
  <body>
    <div class="big-table"></div>
    <script>
      $.ajax('data/100000')
        .done(function (data) {

          var columns = [
            {
              name: '#', 
              css: {'big-table__cell_col-1': true}
            },
            {
              name: 'Key', 
              map: function (i) {
                return data[i].key; 
              }, 
              css: {'big-table__cell_col-2': true}
            },
            {
              name: 'Value', 
              map: function (i) { 
                return data[i].val.toFixed(4); 
              }, 
              css: {'big-table__cell_col-3': true}
            },
            {
              name: 'Delta', 
              map: function (i) { 
                return data[i].delta.toFixed(4); 
              }, 
              css: {
                'big-table__cell_col-3': true,
                'big-table__cell_color-red': function (val) {
                  return val < 0;
                },
                'big-table__cell_color-green': function (val) {
                  return val > 0;
                }
              }
            },
            {
              name: 'Open?', 
              map: function (i) { 
                return data[i].active ? 'open' : 'closed'; 
              }, 
              css: {'big-table__cell_col-2': true}
            },
            {
              name: 'Rec', 
              map: function (i) { 
                return data[i].rec; 
              }, 
              css: {
                'big-table__cell_col-1': true,
                'big-table__cell_font-bold': function (val) {
                  return val !== 'hold';
                }
              }
            }
          ]

          var table = new BigTable({
            container: '.big-table',
            totalCount: data.length,
            height: 500,
            itemHeight: 40,
            columns: columns
          });
        });
    </script>
  </body>
</html>
